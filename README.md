# ü§ñ Chillicode Health Checker Bot

–ë–æ—Ç Telegram, –∫–æ—Ç–æ—Ä—ã–π –ø–∏–Ω–≥—É–µ—Ç URL-–∞–¥—Ä–µ—Å–∞ –≤–∞—à–∏—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤ —Å –∑–∞–¥–∞–Ω–Ω—ã–º –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–º –∏ –æ–ø–æ–≤–µ—â–∞–µ—Ç –≤ —á–∞—Ç –≤ —Å–ª—É—á–∞–µ –æ—à–∏–±–∫–∏.

![–†–∞–±–æ—Ç–∞ —Å –±–æ—Ç–æ–º](https://raw.githubusercontent.com/chillicode-dev/health-checker-bot/dev/assets/work-with-bot.gif)

## –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

–ë–æ—Ç –ø—Ä–∏–∫—Ä–µ–ø–ª—è–µ—Ç—Å—è –∫ —Ä–∞–±–æ—á–µ–º—É —á–∞—Ç—É –∫–æ–º–ø–∞–Ω–∏–∏, –ø–∏–Ω–≥—É–µ—Ç –≤ —Ñ–æ–Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã–µ URL-–∞–¥—Ä–µ—Å–∞ –∏ –æ–ø–æ–≤–µ—â–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ —Å–ª—É—á–∞–µ –ø–∞–¥–µ–Ω–∏—è –∫–∞–∫–æ–≥–æ-–ª–∏–±–æ —Å–µ—Ä–≤–∏—Å–∞.

–í –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç –µ–≥–æ –º–æ–∂–Ω–æ –Ω–∞–π—Ç–∏ [–≤ Telegram](https://t.me/ChillicodeHealthCheckerBot), –Ω–æ –∏–∑-–∑–∞ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤
–Ω–∞—à–µ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞ –¥–æ–±–∞–≤–ª—è—Ç—å –∞–¥—Ä–µ—Å–∞ –≤ –Ω–µ–≥–æ –º–æ–∂–µ—Ç —Ç–æ–ª—å–∫–æ –µ–≥–æ root-–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å.

–ù–æ –Ω–µ—Ç –Ω–∏–∫–∞–∫–æ–π –ø—Ä–æ–±–ª–µ–º—ã —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å –±–æ—Ç –Ω–∞ —Å–≤–æ–µ–º —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ.

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä

1. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å —Å–≤–æ–π –±–æ—Ç —É [@BotFather](https://t.me/botfather) [–ø–æ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏](https://core.telegram.org/bots#6-botfather)
2. –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤—ã–¥–∞–Ω–Ω—ã–π —Ç–æ–∫–µ–Ω –≤ –Ω–∞–¥–µ–∂–Ω–æ–º –º–µ—Å—Ç–µ
3. –°–∫–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–µ–∫—Ç –Ω–∞ –≤–∞—à —Å–µ—Ä–≤–µ—Ä/–ª–æ–∫–∞–ª—å–Ω—É—é –º–∞—à–∏–Ω—É
4. –í—ã–ø–æ–ª–Ω–∏—Ç—å —É—Å—Ç–∞–Ω–æ–≤–∫—É [MongoDB](https://www.mongodb.com/) –ª–æ–∫–∞–ª—å–Ω–æ –∏–ª–∏ —Å–æ–∑–¥–∞—Ç—å –∫–ª–∞—Å—Ç–µ—Ä –≤ [MongoDB Atlas](https://www.mongodb.com/cloud/atlas)
5. –í—ã–ø–æ–ª–Ω–∏—Ç—å `npm ci`
6. –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Ñ–∞–π–ª `.env.example` –≤ `.env`
7. –ó–∞–ø–æ–ª–Ω–∏—Ç—å `.env` —Ñ–∞–π–ª –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–º–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è (–æ–ø–∏—Å–∞–Ω—ã –Ω–∏–∂–µ –≤ —Ç–∞–±–ª–∏—Ü–µ)
8. –í—ã–ø–æ–ª–Ω–∏—Ç—å `npm run start` –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –±–æ—Ç–∞ –≤ production —Ä–µ–∂–∏–º–µ —Å –ø–æ–º–æ—â—å—é [pm2](https://pm2.keymetrics.io/)

## ENV-–ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ

| –ò–º—è                    | –û–±—è–∑–∞—Ç–µ–ª—å–Ω–∞—è | –û–ø–∏—Å–∞–Ω–∏–µ                                                                                                                       |
| ---------------------- | ------------ | ------------------------------------------------------------------------------------------------------------------------------ |
| TELEGRAM_BOT_TOKEN     | –î–∞           | –¢–æ–∫–µ–Ω, –ø–æ–ª—É—á–µ–Ω–Ω—ã–π –æ—Ç BotFather                                                                                                 |
| TELEGRAM_BOT_ROOT_USER | –î–∞           | –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è Telegram, –∫–æ—Ç–æ—Ä—ã–π —è–≤–ª—è–µ—Ç—Å—è root-–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º –¥–ª—è –¥–∞–Ω–Ω–æ–≥–æ –±–æ—Ç–∞                                                |
| HTTP_PROXY_ADDR        | –ù–µ—Ç          | –ü—Ä–æ–∫—Å–∏ —Å–µ—Ä–≤–µ—Ä –≤ —Ñ–æ—Ä–º–∞—Ç–µ `http://username:password@host:port`, –µ—Å–ª–∏ Telegram –ø–æ –∫–∞–∫–∏–º-–ª–∏–±–æ –ø—Ä–∏—á–∏–Ω–∞–º –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω –≤ –≤–∞—à–µ–π —Å—Ç—Ä–∞–Ω–µ |
| MONGODB_CONNECTION     | –î–∞           | –°—Ç—Ä–æ–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö MongoDB –≤ —Ñ–æ—Ä–º–∞—Ç–µ `mongodb+srv://username:password@clustername.mongodb.net/dbname`            |
| PM2_PROCESS_NAME       | –î–∞           | –ù–∞–∑–≤–∞–Ω–∏–µ pm2 –ø—Ä–æ—Ü–µ—Å—Å–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é health-checker-bot)                                                                        |

## –î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

| –ò–º—è    | –§–æ—Ä–º–∞—Ç                                                  | –û–ø–∏—Å–∞–Ω–∏–µ                                     |
| ------ | ------------------------------------------------------- | -------------------------------------------- |
| start  | `/start`                                                | –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–∞ –ø–∏–Ω–≥–∞ –∏ –Ω–∞—á–∞–ª–æ —Ä–∞–±–æ—Ç—ã —Å –±–æ—Ç–æ–º |
| stop   | `/stop`                                                 | –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–µ—Ä–≤–∏—Å –ø–∏–Ω–≥–∞                      |
| status | `/status`                                               | –°—Ç–∞—Ç—É—Å —Ä–∞–±–æ—Ç—ã —Å–µ—Ä–≤–∏—Å–∞ –ø–∏–Ω–≥–∞                  |
| add    | `/add project-name https://test1.com,https://test2.com` | –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–µ–∫—Ç –≤ —Å–ø–∏—Å–æ–∫ —Å URL-–∞–¥—Ä–µ—Å–∞–º–∏      |
| delete | `/delete project-name`                                  | –£–¥–∞–ª–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –ø—Ä–æ–µ–∫—Ç –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é        |
| list   | `/list`                                                 | –û—Ç–æ–±—Ä–∞–∑–∏—Ç—å —Å–ø–∏—Å–æ–∫ –ø—Ä–æ–µ–∫—Ç–æ–≤ –≤ —á–∞—Ç–µ            |
| ping   | `/ping all` –∏–ª–∏ `/ping project-name`                    | –ü—Ä–æ–ø–∏–Ω–≥–æ–≤–∞—Ç—å –ø—Ä–æ–µ–∫—Ç—ã –∏–ª–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –ø—Ä–æ–µ–∫—Ç   |
| info   | `/info`                                                 | –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –±–æ—Ç–µ                            |

## –ò–∑–º–µ–Ω–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞ –ø–∏–Ω–≥–∞

–ò–Ω—Ç–µ—Ä–≤–∞–ª –ø–∏–Ω–≥–∞ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è —Å –ø–æ–º–æ—â—å—é —Å—Ç–∞—Ç–∏—á–Ω–æ–≥–æ —Å–≤–æ–π—Å—Ç–≤–∞ `PingService.tickInterval` –≤ `lib/services/ping-service.js`.
–¢–∞–∫–∂–µ –∑–¥–µ—Å—å –º–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å –ª–∏ —Å–µ—Ä–≤–∏—Å –ø–∏–Ω–≥–∞ –≤ —Å–ª—É—á–∞–µ –æ—à–∏–±–∫–∏ –∏ –¥–∏–∞–ø–∞–∑–æ–Ω –∫–æ–¥–æ–≤ –æ—Ç–≤–µ—Ç–∞ —Å–µ—Ä–≤–µ—Ä–∞ –ø—Ä–∏ –∫–æ—Ç–æ—Ä–æ–º –¥–æ–ª–∂–Ω–∞ –≤—ã–±—Ä–∞—Å—ã–≤–∞—Ç—å—Å—è –æ—à–∏–±–∫–∞:

```javascript
class PingService extends EventEmitter {
  /**
   * Default options for constructor
   * @typedef {Object} PingServiceOptions
   * @property {string[]} [urls] URLs list
   * @property {number} [tickInterval] ping interval
   * @property {boolean} [stopOnFail] stop service after failed ping
   * @property {[number, number]} [successStatus] range of response statuses at which ping is considered as successful
   */
  static defaultOptions = {
    urls: [],
    tickInterval: ms('1m'),
    stopOnFail: true,
    successStatus: [200, 299],
  };

  /* ... */
}
```

–ü–æ–¥—Ä–æ–±–Ω–µ–µ –æ —Å–µ—Ä–≤–∏—Å–∞—Ö –º–æ–∂–Ω–æ –ø–æ—á–∏—Ç–∞—Ç—å –≤ [lib/services/README.md](https://github.com/chillicode-dev/health-checker-bot/blob/master/lib/services/README.md)

## –õ–∏—Ü–µ–Ω–∑–∏—è

[MIT](https://raw.githubusercontent.com/chillicode-dev/health-checker-bot/master/LICENSE)
